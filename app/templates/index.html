{% extends 'base.html' %}

{% block content %}
<p>CPU Temp: <span id="cpu-temp">{{ temp_c }}Â°C</span></p>

{% if stream_path %}
<iframe 
    src="http://{{ request.host.split(':')[0] }}:8889/{{ stream_path }}"
    width="640" height="480"
    allow="fullscreen; autoplay; camera; microphone"
    allowfullscreen
></iframe>
{% endif %}

<!-- Sidebar toggle button -->
<button id="sidebar-toggle"><i class="fa-solid fa-bars"></i></button>

<!-- Sidebar -->
<div id="sidebar">
    <!-- Video toggle -->
    <form action="/toggle_video" method="get">
        <button type="submit"><i class="fa-solid fa-video"></i> Video {{ 'ON' if video_enabled else 'OFF' }}</button>
    </form>

    <!-- Audio toggle -->
    <form action="/toggle_audio" method="get">
        <button type="submit"><i class="fa-solid fa-microphone"></i> Audio {{ 'ON' if audio_enabled else 'OFF' }}</button>
    </form>

    <!-- System buttons -->
    <a href="/shutdown" class="system-btn" onclick="return confirm('Really shutdown the Pi?')">
        <i class="fa-solid fa-power-off"></i> Shutdown
    </a>
    <a href="/reboot" class="system-btn" onclick="return confirm('Really reboot the Pi?')">
        <i class="fa-solid fa-rotate-right"></i> Reboot
    </a>
</div>
{% endblock content %}